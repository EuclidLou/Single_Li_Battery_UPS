# Single_Li_Battery_UPS

## 12V 输入输出不间断电源

秋季作息晚上会断电，为了让台灯在断电后还能亮着，设计一个使用单节锂电池的小型UPS <br>
原先“充电宝+5VUSB转12VDC线”的方案，由于该产品集成度太高，电感值太小，而台灯功率24W，使用时升压模块过热，且相应封装没有感值更大的电感 <br>
之前闲置了一个比亚迪的锂电池，设计电池接口适合电池的尺寸

### 实现功能

1. 12V input&output
2. input掉电后不影响output输出
3. 自动充放电

### 实现方式

* BUCK 12V->5V 
* 5V->TP4056 
* BOOST 3.7V->12V
* Pmos Switch
![PCB](/img/3.jpg "PCB")
![成品](/img/1.jpg "成品")

### 其他

实测最大输出为1.8A，台灯亮度要在75%以内，主要限制因素是电池保护板，通常会限流5A，输出功率在20W左右 <br>
用5V电源替代电池给板子供电，输出功率可以到60W <br>
要满足掉电不断输出，台灯亮度要在25%以内，否则在电池供电之前会瞬间断电，猜测是PMOS开启延迟 <br>

### REMAKE
12V对地总电容约10uF，更换EN_SIG网络的分压电阻，减小12V网络断电后的压降延时 <br>
原先20K对地下拉改为200R，结果不闪灭台灯亮度只提高到50% <br>
目前勉强能用，虽然断电之后还要手动打开台灯开关，最大75%亮度，后续可能的改版方案：
* 需要测量掉电时间
* Vout处增加功率电感
* Pmos移到BOOST之后，永远使能BOOST
* Vout处增加电容 
* 换用铝壳动力电芯，单节支持更大容量，更大输出电流
